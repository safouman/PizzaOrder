(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(53)},43:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),l=a(30),c=a.n(l),s=a(15),r=a(14),o=a(35),p=a(36),u=(a(43),a(9)),m=a(10),d=a(12),h=a(11),z=a(13),b=a(5),f=a(19),v=a(20),g=a.n(v);function y(){var e=Object(f.a)(["\n    query pizzaSizeByname($name: PizzaSizes) {\n        pizzaSizeByName(name: $name) {\n            maxToppings\n            toppings {\n                defaultSelected\n                topping {\n                    name\n                    price\n                }\n            }\n        }\n    }\n"]);return y=function(){return e},e}var j=g()(y()),E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={Toppings:[]},a.selectTopping=a.selectTopping.bind(Object(b.a)(Object(b.a)(a))),a.renderToppings=a.renderToppings.bind(Object(b.a)(Object(b.a)(a))),a.isDisabled=a.isDisabled.bind(Object(b.a)(Object(b.a)(a))),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(z.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.data.loading||this.setDefaultToppings(e)}},{key:"componentDidMount",value:function(){this.props.data.loading||this.setDefaultToppings(this.props)}},{key:"setDefaultToppings",value:function(e){var t=e.data.pizzaSizeByName.toppings,a=[];t.map(function(e){var t=e.defaultSelected,n=e.topping;t&&a.push({name:n.name,price:n.price,checked:t})}),this.setState({Toppings:a})}},{key:"selectTopping",value:function(e){if(!this.props.data.loading&&this.props.data.pizzaSizeByName){var t=this.props.data.pizzaSizeByName.toppings,a=this.state.Toppings;t.map(function(t){var n=t.topping;if(n.name===e.target.value&&e.target.checked)return a.push({name:n.name,price:n.price,checked:e.target.checked});if(n.name===e.target.value&&!e.target.checked)for(var i=0;i<a.length;i++)a[i].name!==e.target.value||e.target.checked||a.splice(i,1)}),this.setState({Toppings:a})}}},{key:"renderToppings",value:function(){var e=this;return this.props.data.pizzaSizeByName.toppings.map(function(t){t.defaultSelected;var a=t.topping;return i.a.createElement("div",{key:a.name},i.a.createElement("li",{className:"collection-item"},i.a.createElement("input",{type:"checkbox",id:a.name,value:a.name,onChange:e.selectTopping,disabled:e.isDisabled(a.name),checked:e.isChecked(a.name)}),i.a.createElement("label",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},for:a.name},i.a.createElement("div",null,a.name),i.a.createElement("div",null,a.price," $"))))})}},{key:"isChecked",value:function(e){return 0!==this.state.Toppings.filter(function(t){return t.name===e}).length}},{key:"isDisabled",value:function(e){var t=this.props.data.pizzaSizeByName.maxToppings;return null!==t&&(this.state.Toppings.length>t-1&&0===this.state.Toppings.filter(function(t){return t.name===e}).length)}},{key:"onSubmit",value:function(e){e.preventDefault();var t={pizza:this.props.selected,toppings:this.state.Toppings};this.props.onSubmit(t),this.setDefaultToppings(this.props)}},{key:"render",value:function(){if(this.props.selected==={})return i.a.createElement("div",null);if(this.props.data.loading)return i.a.createElement("div",null,"Loading Toppings");var e=this.props.data.pizzaSizeByName.maxToppings;return i.a.createElement("div",null,i.a.createElement("h5",null,null!==e?"Select up to ".concat(e," Toppings"):"Unlimited Toppings Selection",i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("ul",{className:"collection"},this.renderToppings()),i.a.createElement("button",{className:"btn"},"Add Pizza"))))}}]),t}(n.Component),O=Object(r.b)(j,{options:function(e){return{variables:{name:e.selected.name}}}})(E);function k(){var e=Object(f.a)(["\n    {\n        pizzaSizes {\n            name\n\n            basePrice\n        }\n    }\n"]);return k=function(){return e},e}var S=g()(k()),T=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(m.a)(t,[{key:"renderPizzas",value:function(){var e=this;return this.props.data.pizzaSizes.map(function(t){var a=t.basePrice,n=t.name;return i.a.createElement("li",{onClick:function(){e.props.setSelected({name:n.toUpperCase(),basePrice:a})},className:"collection-item",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},key:n},i.a.createElement("p",null," ",n," "),i.a.createElement("p",null,a,"$"))})}},{key:"render",value:function(){return this.props.data.loading?i.a.createElement("div",null," Loading Pizzas .."):i.a.createElement("div",null,i.a.createElement("h5",null," Select a Pizza"),i.a.createElement("ul",{className:"collection"},this.renderPizzas()),Object.entries(this.props.selected).length>0&&i.a.createElement("h5",null," ","Selected Pizza: ",this.props.selected.name," ",this.props.selected.basePrice," $"))}}]),t}(n.Component),P=Object(r.b)(S)(T),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={Total:0},a.priceCalculator=a.priceCalculator.bind(Object(b.a)(Object(b.a)(a))),a}return Object(z.a)(t,e),Object(m.a)(t,[{key:"priceCalculator",value:function(){for(var e=this.props.pizzas,t=0,a=0;a<e.length;a++){t+=e[a].pizza.basePrice;for(var n=0;n<e[a].toppings.length;n++)t+=e[a].toppings[n].price}this.setState({Total:t})}},{key:"componentWillReceiveProps",value:function(e){this.priceCalculator()}},{key:"onDelete",value:function(e){this.props.deletePizza(e)}},{key:"renderPizzas",value:function(){var e=this;return this.props.pizzas.map(function(t,a){var n=t.pizza,l=t.toppings;return i.a.createElement("li",{key:a,className:"collection-item"},i.a.createElement("div",null,i.a.createElement("ul",{className:"collection"},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.name," X ",n.basePrice," $",i.a.createElement("i",{style:{cursor:"pointer"},className:"material-icons ",onClick:function(){return e.onDelete(a)}},"delete")),l.map(function(e,t){return i.a.createElement("li",{key:t,className:"collection-item"},e.name," X ",e.price," $")})," ")))})}},{key:"render",value:function(){var e=this.props.pizzas;return i.a.createElement("div",null,i.a.createElement("h5",null,"Cart"),0===e.length?i.a.createElement("ul",{className:"collection"},i.a.createElement("li",{className:"collection-item"},i.a.createElement("p",null," Add your Pizzas and they will appear here"))):i.a.createElement("ul",{className:"collection"},this.renderPizzas()),i.a.createElement("h5",null," Total : ",this.state.Total," $"))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={selected:{},pizzas:[]},a.setSelected=a.setSelected.bind(Object(b.a)(Object(b.a)(a))),a.setPizza=a.setPizza.bind(Object(b.a)(Object(b.a)(a))),a.deletePizza=a.deletePizza.bind(Object(b.a)(Object(b.a)(a))),a}return Object(z.a)(t,e),Object(m.a)(t,[{key:"deletePizza",value:function(e){var t=this.state.pizzas;e>-1&&t.splice(e,1),this.setState({pizzas:t})}},{key:"setSelected",value:function(e){this.setState({selected:e})}},{key:"setPizza",value:function(e){var t=this.state.pizzas;t.push(e),this.setState({pizzas:t,selected:{}})}},{key:"render",value:function(){var e=this.state,t=e.selected,a=e.pizzas;return i.a.createElement("div",{className:"container"},i.a.createElement("h4",null,"This is a pizza order page"),i.a.createElement("div",null,i.a.createElement(w,{pizzas:a,deletePizza:this.deletePizza}),i.a.createElement(P,{selected:t,setSelected:this.setSelected}),Object.entries(t).length>0&&i.a.createElement(O,{onSubmit:this.setPizza,selected:t})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=new o.a,D=new p.a({uri:"https://core-graphql.dev.waldo.photos/pizza",opts:{mode:"no-cors"}}),x=new s.c({cache:C,link:D});c.a.render(i.a.createElement(function(){return i.a.createElement(r.a,{client:x},i.a.createElement(N,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.272de0f3.chunk.js.map